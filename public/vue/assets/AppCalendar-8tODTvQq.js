import{_ as re,c as a,o as s,a as e,F,r as v,w as U,b as N,d as q,n as Y,t as C,e as oe,f as ne,i as Z,u as ie,g as ee,h as ue,j as te,k as le,l as se,m as h,p as G,q as de,s as ce}from "./index-B3aGkqQj.js";import ve from "./CreateEvent-CmZEivSW.js";import{m as fe}from "./diary_data-BP80wiui.js";import{g as he}from "./icons-DZcaBuD_.js";import me from "./SubjectDetails-DPEMpSxX.js";const ge={};function pe(T, b){return s(),a(F,null,[b[0]||(b[0]=e("div",{class:"flex p-2 w-full text-center"},null,-1)),b[1]||(b[1]=e("div",{class:"flex bg-teal-500/40 p-2 min-w-max text-center rounded-md cursor-default hover:bg-teal-500/50 hover:font-semibold"}," Календарь ",-1)),b[2]||(b[2]=e("div",{class:"flex p-2 w-full text-center"},null,-1))],64)}const ye=re(ge,[["render",pe]]),xe={class:"flex flex-col items-center justify-center w-full h-full overflow-auto scrollbar scrollbar-thumb-indigo-500/50 scrollbar-track-red-200/10"},be={class:"relative w-full group"},we={class:"flex flex-col justify-center w-full"},_e={class:"flex w-full"},ke={class:"flex w-full items-center justify-center"},De=["onMouseenter"],$e={class:"flex flex-col w-full"},Ce=["onMouseenter","onClick"],je={key:0,class:"relative w-full cursor-default"},Q={__name:"CalendarView",props:{days:{type:Array,required:!0},calendar:{type:Array,required:!0,default:()=>[]},strDay:{type:String,required:!0}},emits:["getDayInfo"],setup(T, {emit:b}){const f=T,w=b,m=v(null),r=v(null),i=v(!1),_= d=>{m.value=d},j=()=>{m.value=null},S= d=>{r.value=d},u=()=>{r.value=null},D=(d, o)=>{f.calendar[d][o].dayOfMonth&&(f.calendar.forEach(O=>{O.forEach(x=>{x.isActive=!1})}),f.calendar[d][o].isActive=!0,w("getDayInfo",f.calendar[d][o].date))},I=()=>{f.calendar.forEach(d=>{d.forEach(o=>{o.isActive=!1})}),f.calendar.forEach(d=>{d.forEach(o=>{o.date===f.strDay&&(o.isActive=!0)})})};return U(()=>[f.calendar,f.strDay],([d,o])=>{!d||d.length===0||!o||I()},{immediate:!0}),(d, o)=>(s(),a("div",xe,[e("div",be,[e("div",{class:"absolute bottom-1 right-1 cursor-pointer",onClick:o[0]||(o[0]= O=>i.value=!i.value)},"..."),o[1]||(o[1]=e("div",{class:"absolute bottom-1 left-1 hidden group-hover:block text-sm"}," Информация о днях ",-1))]),e("table",we,[e("thead",_e,[e("tr",ke,[(s(!0),a(F,null,q(T.days,(O, x)=>(s(),a("th",{key:x,class:Y(["flex flex-1 aspect-square justify-center items-center bg-teal-500/50 hover:bg-teal-500/50 first:rounded-tl-lg last:rounded-tr-lg hover:font-semibold hover:cursor-default hover:text-lg transition-transform duration-200 ease-in-out",{"inset-shadow-sm inset-shadow-teal-500 text-lg":r.value===x}]),onMouseenter: g=>_(x),onMouseleave:j},C(O),43,De))),128))])]),e("tbody",$e,[(s(!0),a(F,null,q(T.calendar,(O, x)=>(s(),a("tr",{key:x,class:"flex w-full items-center justify-center"},[(s(!0),a(F,null,q(O,(g, $)=>(s(),a("td",{key:$,class:Y(["flex flex-1 aspect-square justify-center items-center bg-indigo-100/10 hover:inset-shadow-sm hover:inset-shadow-teal-500/40 hover:font-semibold hover:text-lg transition-transform duration-200 ease-in-out",{"bg-teal-500/50 inset-shadow-sm inset-shadow-gray-700":g.isActive,"bg-teal-500/40 hover:bg-teal-500/60 hover:inset-shadow-sm hover:inset-shadow-teal-500":m.value===$,"bg-red-700/10 hover:inset-shadow-sm hover:inset-shadow-orange-500/50 cursor-not-allowed disabled":!g.dayOfMonth,"bg-yellow-400/60":g.hasTasks&&g.dayOfMonth,"cursor-pointer":g.dayOfMonth&&m.value!==$&&!g.isActive,"cursor-alias":g.isActive,"first:rounded-bl-lg last:rounded-br-lg":x===T.calendar.length-1}]),onMouseenter: V=>S($),onMouseleave:u,onClick: V=>D(x,$)},[e("div",null,C(g.number),1)],42,Ce))),128))]))),128))])]),i.value?(s(),a("div",je,[...o[2]||(o[2]=[oe('<div class="absolute w-full top-4"><div><span class="text-indigo-500/50">●</span> - текущий месяц</div><div><span class="text-yellow-400/70">●</span> - события</div><div><span class="text-red-300/70">●</span> - выбранный день</div><div><span class="text-red-400/70">●</span> - смежный месяц</div></div>',1)])])):N("",!0)]))}},J=new Date,W=J.getMonth()+1,R=J.getFullYear(),K=`${String(J.getDate()).padStart(2,"0")}-${String(W).padStart(2,"0")}-${R}`,Se=[`14-${String(W).padStart(2,"0")}-${R}`,K,`23-${String(W).padStart(2,"0")}-${R}`],Me={[K]:[{time:"15:00-16:30",subject:"Английский язык",topics:["Bathroom","Слова","Чтение"]},{time:"17:00-18:30",subject:"Испанский язык",topics:["Аудирование","Диктант"]},{time:"17:00-18:30",subject:"Китайский язык",topics:["Аудирование","Диктант"]}]},Ee={class:"relative flex flex-col gap-1 items-center w-full"},Ae={class:"flex flex-col flex-1 min-h-0 bg-teal-50/40 rounded-md w-full h-full p-2"},Oe={class:"relative p-4 flex w-full justify-center items-center gap-2 cursor-default border-b-3 border-b-teal-500/20"},Te={key:0,class:"flex flex-col flex-1 overflow-auto scrollbar scrollbar-thumb-emerald-700/80 scrollbar-track-red-200/10"},Be={class:"flex flex-1 flex-col w-full items-center justify-around space-y-1 p-2 gap-4 cursor-default"},Fe={class:"flex w-full items-center justify-between p-2 bg-third rounded-t-md"},Ie={class:"flex items-center gap-3"},Ye=["src"],ze={class:"font-medium"},qe={class:"flex gap-2 items-center"},Ne={class:"text-sm text-gray-600"},Ve={class:"flex flex-col w-full"},He={class:"flex items-center justify-between"},Le={class:"font-medium text-gray-700 mb-1"},Ge={key:0,class:"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold"},Ue={class:"space-y-1 ml-3"},Pe={class:"flex items-center"},We={class:"flex gap-2 truncate w-full"},Re={key:0,class:"border-r border-gray-400 pr-2"},Je={class:"flex items-center"},Ke={class:"flex w-full justify-between p-3 border-t border-teal-700/30"},Qe={class:"flex gap-2"},Xe={class:"text-xs text-gray-500"},Ze={class:"flex gap-2"},et=["onClick"],tt={key:1,class:"w-full text-center p-2 cursor-default"},X=ne({__name:"CalendarDayInfoView",props:{strDay:{type:String,required:!1},calendarEvents:{type:Array,required:!0}},emits:["updateStrDay"],setup(T, {emit:b}){const f=v(fe),w=Z("deviceType"),m= l=>l>=4.5?"bg-green-100 text-green-800":l>=3.5?"bg-yellow-100 text-yellow-800":l>=2.5?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",r= l=>l.topics.reduce((t, k)=>t+k.homeworks.length,0);v(""),v("");const i=T,_=ie(),j=ee();ue();const S=b,u=v(""),D=v(i.calendarEvents),I=v(null),d=v(null),o=v(null),O=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],x=v([]);te(()=>{$(i.strDay),g(i.strDay)}),U(()=>i.strDay, l=>{u.value=l,g(u.value)});const g= l=>{x.value=null,l===K&&(x.value=Me[l])};U(()=>i.strDay, l=>{$(l)});const $= l=>{if(l){const[t,k,p]=l.split("-");I.value=t,d.value=k,o.value=p}else I.value=null,d.value=null,o.value=null},V=le(()=>{let l=new Date(o.value,d.value-1,I.value).getDay();return O[l]}),H= l=>{const[t,k,p]=l.split("-");return new Date(p,k-1,t)},c=()=>{let l=H(u.value);for(let t=D.value.length-1; t>=0; t--){if(l>H(D.value[t])){u.value=D.value[t],$(u.value),g(u.value),S("updateStrDay",u.value);break}t===0&&(u.value=D.value[D.value.length-1],$(u.value),g(u.value),S("updateStrDay",u.value))}},n=()=>{let l=H(u.value);for(let t=0; t<D.value.length; t++){if(l<H(D.value[t])){u.value=D.value[t],$(u.value),g(u.value),S("updateStrDay",u.value);break}t===D.value.length-1&&(u.value=D.value[0],$(u.value),g(u.value),S("updateStrDay",u.value))}},M=v(!1);U(()=>j.params,()=>{j.params.date&&j.params.time||(M.value=!1)});const z=(l, t)=>{M.value=!0,_.push({name:"Subject-Details",params:{date:l,time:t}})};return(l, t)=>(s(),a("div",Ee,[e("div",{class:"flex gap-0.5 w-full justify-center text-center"},[e("div",{onClick:c,class:"bg-teal-500/40 max-h-min rounded-l-md p-1 cursor-pointer hover:bg-teal-500/50 hover:font-semibold"},[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})],-1)])]),t[3]||(t[3]=e("div",{class:"bg-teal-500/40 max-h-min w-full p-1 cursor-default hover:bg-teal-500/50 hover:font-semibold"}," Ближайшее событие ",-1)),e("div",{onClick:n,class:"bg-teal-500/40 max-h-min rounded-r-md p-1 cursor-pointer hover:bg-teal-500/50 hover:font-semibold"},[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})],-1)])])]),e("div",Ae,[e("div",Oe,[e("div",null,C(V.value),1),e("div",null,C(i.strDay),1)]),x.value?(s(),a("div",Te,[e("div",{class:Y(["relative flex h-full flex-col overflow-hidden",{"p-1":h(w)==="tablet","pt-1":h(w)==="mobile"}])},[e("div",{class:Y(["flex justify-around gap-1 overflow-hidden w-full h-full scrollbar scrollbar-thumb-emerald-700/80 scrollbar-track-red-200/10",{"p-2":h(w)==="tablet"}])},[e("div",{class:Y(["flex flex-col flex-1 min-h-0 w-full h-full bg-white/20 rounded-md gap-4 overflow-auto scrollbar scrollbar-thumb-indigo-500/50",{"px-2 py-4":h(w)==="desktop"||h(w)==="tablet","p-1":h(w)==="mobile"}])},[(s(!0),a(F,null,q(f.value,(k, p)=>(s(),a("div",{key:p,class:"flex flex-1 flex-col w-full max-h-min bg-third shadow-sm/20 shadow-green-800 border-1 rounded-md"},[e("div",Be,[(s(!0),a(F,null,q(k.subjects,(y, B)=>(s(),a("div",{key:B,class:"relative flex flex-1 flex-col w-full bg-third rounded-md group"},[e("div",Fe,[e("div",Ie,[e("img",{src:h(he)(y.subject),alt:"Language Icon",class:"w-6 h-6"},null,8,Ye),e("div",ze,C(y.subject),1)]),e("div",qe,[e("div",Ne,C(y.time),1)])]),e("div",{class:Y(["flex flex-1 w-full p-3",{"flex-col gap-2":h(w)==="mobile","flex-row":h(w)!=="mobile"}])},[e("div",Ve,[(s(!0),a(F,null,q(y.topics,(E, L)=>(s(),a("div",{key:L,class:"flex flex-col w-full mb-3 last:mb-0"},[e("div",He,[e("div",Le,C(E.topic),1),E.mark?(s(),a("div",Ge," Итоговая оценка: "+C(E.mark),1)):N("",!0)]),e("div",Ue,[(s(!0),a(F,null,q(E.homeworks,(A, P)=>(s(),a("div",{key:P,class:"flex justify-between items-center p-1 hover:bg-gray-50/30 rounded"},[e("div",Pe,[t[4]||(t[4]=e("span",{class:"text-xs mr-2"},"•",-1)),e("div",We,[A!=null&&A.type?(s(),a("div",Re,C(A.type),1)):N("",!0),e("div",null,C(A.homework),1)])]),e("div",Je,[e("div",{class:Y(["px-4 py-3 rounded text-sm font-semibold shadow-md/20",m(A.mark)])},C(A.mark),3)])]))),128))])]))),128))])],2),e("div",Ke,[e("div",Qe,[e("div",Xe," Тем: "+C(y.topics.length)+" | Заданий: "+C(r(y)),1)]),e("div",Ze,[e("button",{class:"info-button",onClick: E=>z(k.date,y.time)}," Подробнее ",8,et)])])]))),128))])]))),128))],2)],2),e("button",{onClick:t[0]||(t[0]= k=>h(_).push({name:"Create-Event"})),class:"absolute bottom-0 flex w-full text-center justify-center add-button"}," Добавить занятие ")],2)])):(s(),a("div",tt," Нет занятий "))]),h(j).name==="Create-Event"?(s(),se(ve,{key:0})):N("",!0)]))}}),lt={key:0,class:"flex flex-col w-full rounded-md select-none"},st={class:"flex flex-1 gap-0.5"},at={class:"flex w-full justify-between items-center bg-teal-500/40 cursor-default hover:bg-teal-500/40 hover:text-lg hover:font-semibold h-full"},rt={key:1,class:"w-12"},ot={class:"hidden md:flex w-full h-full justify-between p-1 gap-2 overflow-hidden"},nt={class:"flex w-1/3"},it={class:"flex w-2/3 h-full"},ut={class:"flex flex-col md:hidden w-full h-full justify-between pt-1 gap-2 overflow-y-scroll scrollbar scrollbar-thumb-indigo-500/50 scrollbar-track-red-200/10 p-2"},dt={class:"flex h-full z-10"},ct={class:"absolute bottom-4 right-4 hover:scale-105 cursor-pointer hover:shadow-xl hover:shadow-gray-500/50 z-10"},vt=["src"],ft={__name:"CalendarBody",setup(T){const b=v(["Пн","Вт","Ср","Чт","Пт","Сб","Вс"]),f=v([]),w=v(Se),m=new Date,r=v(m.getMonth()),i=v(m.getFullYear()),_=v(""),j=v(!1),S=ee(),u=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],D=le(()=>u[r.value]),I= c=>{_.value=c},d= c=>[String(c.getDate()).padStart(2,"0"),String(c.getMonth()+1).padStart(2,"0"),String(c.getFullYear())].join("-");te(async()=>{_.value=`${String(m.getDate()).padStart(2,"0")}-${String(m.getMonth()+1).padStart(2,"0")}-${m.getFullYear()}`,f.value=await o()});const o=async()=>{const c=[],n=new Date(i.value,r.value+1,0).getDate(),M=new Date(i.value,r.value,0).getDate(),z=new Date(i.value,r.value,1).getDay();new Date(i.value,r.value,n).getDay();const l=z===0?6:z-1,t=(p, y, B, E)=>{const L=p.getDate(),A=p.getMonth()+1,P=p.getFullYear(),ae=`${String(L).padStart(2,"0")}-${String(A).padStart(2,"0")}-${P}`;return{number:L,dayOfMonth:y,isActive:B,hasTasks:E,date:ae}};let k=1;for(let p=0; p<6; p++){c[p]=[];for(let y=0; y<7; y++)if(p===0&&y<l){const B=M-l+y+1,E=new Date(i.value,r.value-1,B);c[p][y]=t(E,!1,!1,!1)}else if(k<=n){const B=new Date(i.value,r.value,k);c[p][y]=t(B,!0,!1,!1),k++}else{const B=k-n,E=r.value===11?0:r.value+1,L=r.value===11?i.value+1:i.value,A=new Date(L,E,B);c[p][y]=t(A,!1,!1,!1),k++}}return await O(c,w.value),c},O=async(c, n)=>{try{c.forEach(M=>{M.forEach(z=>{z.hasTasks=n.some(l=>l===z.date)})})}catch(M){console.error("Error:",M)}},x= c=>{_.value=c},g=async()=>{r.value===11?(r.value=0,i.value++):r.value++,f.value=await o(),V(m)},$=async()=>{r.value===0?(r.value=11,i.value--):r.value--,f.value=await o(),V(m)},V= c=>{r.value===c.getMonth()&&i.value===c.getFullYear()?_.value=d(c):_.value=d(new Date(i.value,r.value,1))},H=async()=>{r.value=m.getMonth(),i.value=m.getFullYear(),f.value=await o(),_.value=d(m)};return(c, n)=>(s(),a(F,null,[h(S).name==="Calendar"||h(S).name==="Create-Event"?(s(),a("div",lt,[e("div",st,[e("div",{class:"bg-teal-500/40 rounded-l-md p-1 cursor-pointer hover:bg-teal-500/50 hover:font-semibold flex items-center justify-center h-full",onClick:$},[...n[5]||(n[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})],-1)])]),e("div",at,[n[7]||(n[7]=e("div",{class:"w-12"},null,-1)),e("div",null,C(D.value),1),r.value!==h(m).getMonth()?(s(),a("div",{key:0,class:"relative group",onClick:H},[...n[6]||(n[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-12 size-5 hover:scale-95 hover:cursor-pointer"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})],-1),e("div",{class:"absolute left-1/2 transform -translate-x-1/2 -translate-y-16 mb-2 hidden group-hover:block bg-emerald-500/50 text-xs rounded py-1 px-2"}," Текущий месяц ",-1)])])):(s(),a("div",rt))]),e("div",{class:"text-nowrap bg-teal-500/40 rounded-r-md p-1 cursor-pointer hover:bg-teal-500/50 hover:font-semibold flex items-center justify-center h-full",onClick:g},[...n[8]||(n[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})],-1)])])]),e("div",ot,[e("div",nt,[G(Q,{days:b.value,calendar:f.value,strDay:_.value,onGetDayInfo:x},null,8,["days","calendar","strDay"])]),e("div",it,[G(X,{strDay:_.value,calendarEvents:w.value,onUpdateStrDay:I},null,8,["strDay","calendarEvents"])])]),e("div",ut,[e("div",dt,[G(X,{strDay:_.value,calendarEvents:w.value,onUpdateStrDay:I},null,8,["strDay","calendarEvents"])]),j.value?(s(),a("div",{key:0,onClick:n[3]||(n[3]= M=>j.value=!1),class:"fixed inset-0 flex items-center justify-center bg-gray-500/20 bg-opacity-50 z-20"},[e("div",{class:"relative min-h-[210px] w-64 bg-white rounded-lg shadow-lg",onClick:n[2]||(n[2]=de(()=>{},["stop"]))},[G(Q,{days:b.value,calendar:f.value,strDay:_.value,onGetDayInfo:x,onClick:n[0]||(n[0]= M=>j.value=!1)},null,8,["days","calendar","strDay"]),e("div",{onClick:n[1]||(n[1]= M=>j.value=!1),class:"absolute -top-8 -right-8 cursor-pointer scale-200 font-normal hover:text-red-500"}," ✗ ")])])):N("",!0),e("div",ct,[e("img",{alt:"Календарь",onClick:n[4]||(n[4]= M=>j.value=!j.value),src:h(ce)},null,8,vt)])])])):N("",!0),h(S).name==="Subject-Details"?(s(),se(me,{key:1,class:"w-full h-full",date:h(S).params.date,time:h(S).params.time},null,8,["date","time"])):N("",!0)],64))}},ht={class:"flex justify-center gap-2 mb-2"},mt={class:"flex flex-1 min-h-0 w-full justify-center gap-2"},wt={__name:"AppCalendar",setup(T){const b=Z("isMdOrLarger");return(f, w)=>(s(),a("div",{class:Y(["flex flex-1 flex-col min-h-0 bg-white/80 rounded-md m-2 p-2",{"w-full":h(b)}])},[e("div",ht,[G(ye)]),e("div",mt,[G(ft)])],2))}};export{wt as default};
