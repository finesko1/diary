import{_ as H,c as l,o as a,a as e,F as x,r as p,g as I,u as R,j as T,w as Y,i as $,b as S,n as u,m as o,t as i,d as b,p as O}from "./index-B3aGkqQj.js";import{g as q}from "./icons-DZcaBuD_.js";import{m as z}from "./diary_data-BP80wiui.js";const P={};function G(j, c){return a(),l(x,null,[c[0]||(c[0]=e("div",{class:"flex p-2 w-full text-center"},null,-1)),c[1]||(c[1]=e("div",{class:"flex bg-secondary p-2 min-w-max text-center rounded-md cursor-default hover:font-semibold"}," Дневник ",-1)),c[2]||(c[2]=e("div",{class:"flex p-2 w-full text-center"},null,-1))],64)}const J=H(P,[["render",G]]),K={class:"flex flex-1 flex-col h-full rounded-md overflow-hidden select-none"},Q={key:0,class:"relative"},U={class:"border p-1 border-teal-700/30 rounded-md min-w-28 text-center font-semibold cursor-default"},X={key:1,class:"border p-1 border-teal-700/30 rounded-md w-28 h-full loading"},Z={class:"flex flex-col gap-1 items-center cursor-pointer"},ee={class:"flex gap-1"},te=["onClick"],se={class:"flex flex-1 w-full px-4 pt-2 gap-2 justify-between"},le={class:"flex justify-start px-4 gap-2 w-full cursor-default"},ae={class:"font-semibold"},oe={class:"flex text-nowrap"},re={class:"flex flex-1 flex-col w-full items-center justify-around space-y-1 p-2 gap-4 cursor-default"},ne={class:"flex w-full items-center justify-between p-2 bg-third rounded-t-md"},de={class:"flex items-center gap-3"},ie=["src"],ce={class:"font-medium"},ue={class:"flex gap-2 items-center"},fe={class:"text-sm text-gray-600"},me={key:0,class:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold"},pe={class:"flex flex-col w-full"},xe={class:"font-medium text-gray-700 mb-1"},ge={class:"space-y-1 ml-3"},ve={class:"flex items-center"},_e={class:"truncate max-w-[200px]"},be={class:"flex items-center gap-2"},he={class:"flex w-full justify-between p-3 border-t border-teal-700/30"},ye={class:"flex gap-2"},we={class:"text-xs text-gray-500"},ke={class:"flex gap-2"},De=["onClick"],Se={__name:"DiaryBody",props:{dates:{type:Array,required:!1}},setup(j){const c=p(z),y=p(""),w=p(""),h=p(!1),g=I(),M=R(),v=p("week"),_=p(),B=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],F= n=>{const[t,s,m]=n.split("-"),r=new Date(m,s-1,t);return B[r.getDay()]},L=[{id:"today",label:"Сегодня"},{id:"week",label:"Неделя"},{id:"month",label:"Месяц"}],N= n=>n.topics.reduce((t, s)=>t+s.homeworks.length,0),W= n=>n>=4.5?"bg-green-100 text-green-800":n>=3.5?"bg-yellow-100 text-yellow-800":n>=2.5?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800";T(()=>{C(v.value),y.value=String(g.params.date),w.value=String(g.params.time)}),Y(()=>g.params,()=>{g.params.date&&g.params.time||(h.value=!1)});const V=(n, t)=>{y.value=n,w.value=t,h.value=!0,M.push({name:"Diary-Subject-Details",params:{date:n,time:t}})},C= n=>{const t=new Date;switch(v.value=n,n){case"today":_.value=[String(t.getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0")].join(".");break;case"week":const s=t.getDay(),m=s===0?-6:1-s,r=new Date(t);r.setDate(t.getDate()+m);const k=s===0?0:7-s,f=new Date(t);f.setDate(t.getDate()+k),_.value=[[String(r.getDate()).padStart(2,"0"),String(r.getMonth()+1).padStart(2,"0")].join("."),[String(f.getDate()).padStart(2,"0"),String(f.getMonth()+1).padStart(2,"0")].join(".")].join(" - ");break;case"month":_.value=[[String(new Date(t.getFullYear(),t.getMonth(),1).getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0")].join("."),[String(new Date(t.getFullYear(),t.getMonth()+1,0).getDate()).padStart(2,"0"),String(t.getMonth()+1).padStart(2,"0")].join(".")].join(" - ");break}},d=$("deviceType");return(n, t)=>(a(),l("div",K,[h.value?S("",!0):(a(),l("div",{key:0,class:u(["flex flex-1 justify-between p-2 items-start",{"p-2":o(d)==="desktop"||o(d)==="tablet","p-1":o(d)==="mobile"}])},[_.value?(a(),l("div",Q,[e("div",U,i(_.value),1)])):(a(),l("div",X,[...t[1]||(t[1]=[e("div",{class:"flex blurred-text bg-gray-500/40 w-full"}," ",-1)])])),e("div",Z,[e("div",ee,[(a(),l(x,null,b(L, s=>e("div",{key:s.id,class:u(["border-2 border-teal-700/30 rounded-md p-1 border-dashed text-sm transition-all",{"border-2 border-teal-700/50 border-solid scale-105 font-semibold":v.value===s.id,"text-xs":o(d)==="mobile"}]),onClick: m=>C(s.id)},i(s.label),11,te)),64))]),e("div",{class:u(["border rounded-md p-1 border-dashed w-full justify-center text-sm",{"flex border-2 border-solid scale-95":v.value==="currentDay",hidden:v.value!=="currentDay","text-xs":o(d)==="mobile"}])}," Выбранный день ",2)])],2)),h.value?S("",!0):(a(),l("div",{key:1,class:u(["relative flex h-full flex-col overflow-hidden",{"p-1":o(d)==="tablet","pt-1":o(d)==="mobile"}])},[e("div",{class:u(["flex justify-around gap-1 overflow-hidden w-full h-full scrollbar scrollbar-thumb-emerald-700/80 scrollbar-track-red-200/10",{"p-2":o(d)==="tablet"}])},[e("div",{class:u(["flex flex-col flex-1 min-h-0 w-full h-full bg-white/20 rounded-md gap-4 overflow-auto scrollbar scrollbar-thumb-indigo-500/50",{"px-2 py-4":o(d)==="desktop"||o(d)==="tablet","p-1":o(d)==="mobile"}])},[(a(!0),l(x,null,b(c.value,(s, m)=>(a(),l("div",{key:m,class:"flex flex-1 flex-col w-full max-h-min bg-third border-1 rounded-md"},[e("div",se,[e("div",le,[e("div",ae,i(F(s.date)),1),e("div",oe,i(s.date),1)])]),e("div",re,[(a(!0),l(x,null,b(s.subjects,(r, k)=>(a(),l("div",{key:k,class:"relative flex flex-1 flex-col w-full bg-third rounded-md group"},[e("div",ne,[e("div",de,[e("img",{src:o(q)(r.subject),alt:"Language Icon",class:"w-6 h-6"},null,8,ie),e("div",ce,i(r.subject),1)]),e("div",ue,[e("div",fe,i(r.time),1),r.averageMark?(a(),l("div",me," Средняя: "+i(r.averageMark),1)):S("",!0)])]),e("div",{class:u(["flex flex-1 w-full p-3",{"flex-col gap-2":o(d)==="mobile","flex-row":o(d)!=="mobile"}])},[e("div",pe,[(a(!0),l(x,null,b(r.topics,(f, A)=>(a(),l("div",{key:A,class:"flex flex-col w-full mb-3 last:mb-0"},[e("div",xe,i(f.topic),1),e("div",ge,[(a(!0),l(x,null,b(f.homeworks,(D, E)=>(a(),l("div",{key:E,class:"flex justify-between items-center p-1 hover:bg-gray-50/30 rounded"},[e("div",ve,[t[2]||(t[2]=e("span",{class:"text-xs mr-2"},"•",-1)),e("div",_e,i(D.homework),1)]),e("div",be,[e("div",{class:u(["px-2 py-1 rounded text-sm font-semibold",W(D.mark)])},i(D.mark),3)])]))),128))])]))),128))])],2),e("div",he,[e("div",ye,[e("div",we," Тем: "+i(r.topics.length)+" | Заданий: "+i(N(r)),1)]),e("div",ke,[e("button",{class:"info-button",onClick: f=>V(s.date,r.time)}," Подробнее ",8,De)])])]))),128))])]))),128))],2)],2),e("button",{onClick:t[0]||(t[0]= s=>o(M).push({name:"Create-Event"})),class:"absolute bottom-0 flex w-full text-center justify-center add-button"}," Добавить занятие ")],2))]))}},je={class:"flex justify-center gap-2 mb-2"},Me={class:"flex flex-1 min-h-0 w-full justify-center gap-2"},$e={__name:"AppDiary",props:{},setup(j){T(()=>{});const c=$("isMdOrLarger");return(y, w)=>(a(),l("div",{class:u(["flex flex-1 flex-col min-h-0 bg-primary rounded-md m-2 p-2",{"w-full":o(c)}])},[e("div",je,[O(J)]),e("div",Me,[O(Se)])],2))}};export{$e as default};
